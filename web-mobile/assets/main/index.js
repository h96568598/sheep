System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,i,r,u,a,l,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,a=e.AudioClip,l=e.AudioSource,c=e.Component}],execute:function(){var p,s,d,h,f,y,g;r._RF.push({},"14306+s1xNGYaDb7XXQWZhz","AudioManager",void 0);var m=u.ccclass,b=u.property;e("AudioManager",(p=m("AudioManager"),s=b(a),d=b(a),p((y=n((f=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return n=e.call.apply(e,[this].concat(r))||this,o(n,"btnSound",y,i(n)),o(n,"remove",g,i(n)),n}t(n,e);var r=n.prototype;return r.playBtnSound=function(){this.node.getComponent(l).playOneShot(this.btnSound,1)},r.playRemoveSound=function(){this.node.getComponent(l).playOneShot(this.remove,1)},r.sountOffBtn=function(e){this.playBtnSound(),e.isChecked?this.node.getComponent(l).play():this.node.getComponent(l).pause()},n}(c)).prototype,"btnSound",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(f.prototype,"remove",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,i,e,o,c,l,s,r,a,h,u,p,d,C,k,b,f,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,l=t._decorator,s=t.Sprite,r=t.Node,a=t.SpriteFrame,h=t.AudioClip,u=t.ParticleSystem2D,p=t.BoxCollider2D,d=t.Contact2DType,C=t.RigidBody2D,k=t.Input,b=t.tween,f=t.Vec3,g=t.Component}],execute:function(){var _,m,T,v,y,B,S,E,O,A,I,x,N;c._RF.push({},"074104P+eNHU6EoHJRQJBOM","block",void 0);var M=l.ccclass,D=l.property;t("block",(_=M("block"),m=D(s),T=D(r),v=D(a),y=D(h),B=D(u),_((O=n((E=function(t){function n(){for(var n,i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return n=t.call.apply(t,[this].concat(c))||this,e(n,"blockSprite",O,o(n)),e(n,"blockMask",A,o(n)),e(n,"blockSF",I,o(n)),e(n,"clip",x,o(n)),e(n,"effect",N,o(n)),n.upBlockCound=0,n.isClickBlcok=!0,n.isMoveAction=!1,n._mapmanager=null,n._blockIndex=0,n}i(n,t);var c=n.prototype;return c.onDisable=function(){this._blockOff();var t=this.getComponent(p);t.off(d.BEGIN_CONTACT,this.onBeginContact,this),t.off(d.END_CONTACT,this.onEndContact,this)},c._onCollider=function(){var t=this.getComponent(p);t&&(t.on(d.BEGIN_CONTACT,this.onBeginContact,this),t.on(d.END_CONTACT,this.onEndContact,this))},c.init=function(t,n){this._onCollider(),this.blockOn(),this.node.getComponent(C).enabled=!0,this.node.getComponent(C).wakeUp(),this.upBlockCound=0,this.isClickBlcok=!0,this.isMoveAction=!1,this._mapmanager=null,this._blockIndex=0,this.blockMask.active=!1,this._mapmanager=t,this.blockSprite.spriteFrame=this.blockSF[n],this.node.children[0].name=n.toString()},c.blockOn=function(){this.node.on(k.EventType.TOUCH_START,this._touchStart,this),this.node.on(k.EventType.TOUCH_END,this._touchEnd,this),this.node.on(k.EventType.TOUCH_CANCEL,this._touchCancel,this)},c._blockOff=function(){this.node.off(k.EventType.TOUCH_START,this._touchStart,this),this.node.off(k.EventType.TOUCH_END,this._touchEnd,this),this.node.off(k.EventType.TOUCH_CANCEL,this._touchCancel,this)},c._touchStart=function(t,n){this.isClickBlcok&&(this._mapmanager.audioManager.playBtnSound(),this._blockIndex=this.node.getSiblingIndex(),this.node.setSiblingIndex(999),b(this.node.children[0]).to(.1,{scale:new f(1.4,1.4,1.4)}).start())},c._touchEnd=function(t,n){this.isClickBlcok&&(this.isMoveAction=!0,this.node.getComponent(C).enabled=!1,this._mapmanager.checkRecycleBox(this.node),this._blockOff())},c._touchCancel=function(t,n){this.isClickBlcok&&(b(this.node.children[0]).to(.1,{scale:new f(1,1,1)}).start(),this.node.setSiblingIndex(this._blockIndex))},c.onBeginContact=function(t,i,e){if(!this.isMoveAction){var o=i.node,c=t.node,l=o.getComponent(n);c.getSiblingIndex()>o.getSiblingIndex()&&(l.blockMask.active=!0,l.upBlockCound++,l.isClickBlcok=!1)}},c.onEndContact=function(t,i,e){var o=i.node,c=t.node,l=o.getComponent(n);l.isMoveAction&&l.upBlockCound>0||c.getSiblingIndex()>o.getSiblingIndex()&&(l.upBlockCound--,l.upBlockCound<=0&&(l.isClickBlcok=!0,l.blockMask.active=!1))},n}(g)).prototype,"blockSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(E.prototype,"blockMask",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(E.prototype,"blockSF",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),x=n(E.prototype,"clip",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(E.prototype,"effect",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=E))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,r,s,a,l,c,p,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Label,l=e.Node,c=e.tween,p=e.Vec3,u=e.Color,g=e.Component}],execute:function(){var h,m,f,v,y,d,T;r._RF.push({},"c06f6f6gCBN5LBJoACNnevK","GameOver",void 0);var b=s.ccclass,w=s.property;e("GameOver",(h=b("GameOver"),m=w(a),f=w(l),h((d=t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"gameTooltip",d,n(t)),i(t,"resetBtn",T,n(t)),t}return o(t,e),t.prototype.init=function(e){this.gameTooltip.node.setPosition(0,1800),this.resetBtn.setPosition(1500,-80),this.node.active=!0,c(this.gameTooltip.node).to(.4,{position:new p(0,260)}).start(),c(this.resetBtn).to(.6,{position:new p(0,-80)}).start(),e?(this.gameTooltip.color=new u(50,255,0,255),this.gameTooltip.string="游戏胜利"):(this.gameTooltip.color=new u(255,0,0,255),this.gameTooltip.string="游戏结束")},t}(g)).prototype,"gameTooltip",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(y.prototype,"resetBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./GameOver.ts","./MainManager.ts","./MapManager.ts","./block.ts","./MapData.ts","./PoolManager.ts","./MapBlock.ts","./MapEditor.ts","./tempBlock.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./PoolManager.ts","./MapManager.ts"],(function(e){"use strict";var t,a,i,n,r,o,c,s,l,u,g,p,m,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Node,s=e.UIOpacity,l=e.tween,u=e.sys,g=e.Vec3,p=e.Component},function(e){m=e.AudioManager},function(e){h=e.PoolManager},function(e){d=e.MapManager}],execute:function(){var M,f,v,b,y,w,P,S,z,I,D,U,B,E,x;r._RF.push({},"a5736UCmXRJgadz0gD/MjI3","MainManager",void 0);var C=o.ccclass,_=o.property,A=h.instance();e("MainManager",(M=C("MainManager"),f=_(d),v=_(m),b=_(c),y=_(c),w=_(c),P=_(c),M((I=t((z=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"mapManager",I,n(t)),i(t,"audioManager",D,n(t)),i(t,"mapEditor",U,n(t)),i(t,"gameStartUI",B,n(t)),i(t,"boxDown",E,n(t)),i(t,"setPage",x,n(t)),t}a(t,e);var r=t.prototype;return r.start=function(){this.gameStartUI.active=!0;var e=this.gameStartUI.getChildByName("title").getComponent(s),t=l().to(.4,{opacity:0}).to(.4,{opacity:255}).delay(.4);l(e).repeatForever(t).start()},r.gameStart=function(){this.gameStartUI.active=!1,this.mapManager.node.active=!0,this.audioManager.node.active=!0,this.boxDown.active=!0,this.mapEditor.active||this.mapManager.init(this,!1)},r.resetGame=function(){for(var e=this.mapManager.node.children.length-1;e>=0;e--){var t=this.mapManager.node.children[e];A.putNode(t)}this.mapManager.init(this,!0)},r.editorMap=function(){this.mapManager.node.active=!1,this.mapEditor.active=!0},r.resetMap=function(){this.mapEditor.active=!1,this.mapManager.node.active=!0,u.localStorage.removeItem("mapData"),this.resetGame()},r.gameSetBtn=function(){this.audioManager.playBtnSound(),this.setPage.scale=new g(0,0),this.setPage.active=!0,l(this.setPage).to(.2,{scale:new g(1,1,1)}).start()},r.hideGameSetPage=function(){var e=this;this.audioManager.playBtnSound(),l(this.setPage).to(.2,{scale:new g(0,0,1)}).call((function(){e.setPage.active=!1})).start()},t}(p)).prototype,"mapManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"audioManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"mapEditor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"gameStartUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(z.prototype,"boxDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"setPage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=z))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/MapBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,c,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,c=t._decorator,e=t.Input,r=t.Component}],execute:function(){var s;o._RF.push({},"f6da6sa+DBO7KQ9mqzX6clJ","MapBlock",void 0);var i=c.ccclass;c.property,t("MapBlock",i("MapBlock")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var c=o.prototype;return c.start=function(){this.node.on(e.EventType.TOUCH_START,this._touchStart,this),this.node.on(e.EventType.TOUCH_START,this._touchEnd,this)},c._touchStart=function(){},c._touchEnd=function(){},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapData.ts",["cc"],(function(x){"use strict";var y;return{setters:[function(x){y=x.cclegacy}],execute:function(){y._RF.push({},"11e12puAZRKU5ExQr5mQwDl","MapData",void 0);x("mapData",[[{x:-202,y:347},{x:-101,y:347},{x:0,y:347},{x:101,y:347},{x:202,y:347},{x:-151.448,y:290.58},{x:-50.448,y:290.58},{x:50.552,y:290.58},{x:151.552,y:290.58},{x:-101,y:234},{x:0,y:234},{x:101,y:234},{x:-50.448,y:177.58},{x:50.552,y:177.58},{x:0,y:121}],[{x:-202,y:347},{x:-151.448,y:290.58},{x:-202,y:234},{x:202,y:347},{x:202,y:234},{x:151.552,y:290.58},{x:-202,y:8},{x:-151.448,y:-48.42},{x:-202,y:-105},{x:202,y:8},{x:151.552,y:-48.42},{x:202,y:-105}],[{x:-101,y:234},{x:0,y:234},{x:101,y:234},{x:-101,y:121},{x:0,y:121},{x:101,y:121},{x:-101,y:8},{x:0,y:8},{x:101,y:8},{x:-303,y:460},{x:-303,y:347},{x:-202,y:460},{x:-101,y:234},{x:0,y:234},{x:101,y:234},{x:-101,y:8},{x:0,y:8},{x:101,y:8},{x:202,y:460},{x:303,y:460},{x:303,y:347},{x:303,y:-105},{x:303,y:-218},{x:202,y:-218},{x:-303,y:-105},{x:-303,y:-218},{x:-202,y:-218},{x:0,y:460},{x:-252.448,y:-48.42},{x:252.552,y:-48.42}],[{x:0,y:460},{x:-50.448,y:403.58},{x:-101,y:347},{x:-151.448,y:290.58},{x:-202,y:234},{x:-252.448,y:177.58},{x:50.552,y:403.58},{x:101,y:347},{x:151.552,y:290.58},{x:202,y:234},{x:252.552,y:177.58},{x:0,y:347},{x:0,y:234},{x:0,y:121},{x:0,y:8},{x:101,y:8},{x:202,y:8},{x:303,y:8},{x:-101,y:8},{x:-202,y:8},{x:-303,y:8},{x:-252.448,y:-48.42},{x:-151.448,y:-48.42},{x:-50.448,y:-48.42},{x:50.552,y:-48.42},{x:151.552,y:-48.42},{x:252.552,y:-48.42},{x:303,y:-218},{x:252.552,y:-161.42},{x:202,y:-218},{x:-303,y:-218},{x:-252.448,y:-161.42},{x:-202,y:-218},{x:202,y:-105},{x:0,y:-105},{x:-202,y:-105},{x:-303,y:460},{x:0,y:460},{x:303,y:460},{x:303,y:234},{x:0,y:234},{x:-303,y:234},{x:-202,y:121},{x:0,y:121},{x:202,y:121},{x:-101,y:-218},{x:0,y:-218},{x:101,y:-218}],[{x:-202,y:347},{x:-101,y:347},{x:0,y:347},{x:101,y:347},{x:202,y:347},{x:202,y:234},{x:202,y:121},{x:101,y:121},{x:0,y:121},{x:-101,y:121},{x:-202,y:121},{x:-202,y:234},{x:0,y:460},{x:0,y:347},{x:0,y:234},{x:0,y:121},{x:0,y:8},{x:0,y:-105},{x:-252.448,y:-48.42},{x:-151.448,y:-48.42},{x:-151.448,y:-161.42},{x:-252.448,y:-161.42},{x:151.552,y:-48.42},{x:252.552,y:-48.42},{x:252.552,y:-161.42},{x:151.552,y:-161.42},{x:0,y:-218},{x:-202,y:-105},{x:202,y:-105},{x:-303,y:460},{x:303,y:460},{x:-202,y:-218},{x:202,y:-218},{x:-303,y:8},{x:-303,y:121},{x:-303,y:234},{x:-303,y:347},{x:303,y:347},{x:303,y:234},{x:303,y:121},{x:303,y:8},{x:-252.448,y:403.58},{x:-252.448,y:290.58},{x:-252.448,y:177.58},{x:252.552,y:177.58},{x:252.552,y:290.58},{x:252.552,y:403.58},{x:0,y:234},{x:-204,y:-133},{x:-204,y:-141},{x:-204,y:-150},{x:-204,y:-158},{x:-204,y:-167},{x:-204,y:-176},{x:-204,y:-184},{x:-204,y:-193},{x:-204,y:-202},{x:202,y:-133},{x:202,y:-141},{x:202,y:-150},{x:202,y:-158},{x:202,y:-167},{x:202,y:-176},{x:202,y:-184},{x:202,y:-193},{x:202,y:-202}]]);y._RF.pop()}}}));

System.register("chunks:///_virtual/MapEditor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainManager.ts","./MapManager.ts"],(function(t){"use strict";var n,i,e,o,r,a,l,u,c,s,p,h,b,g,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,u=t.Prefab,c=t.Label,s=t.Input,p=t.instantiate,h=t.Color,b=t.Component},function(t){g=t.MainManager},function(t){f=t.MapManager}],execute:function(){var m,y,C,M,_,d,k,v,w,z,E,D,P,B,x;r._RF.push({},"c4367ChF+RDQJDCCogHAKKr","MapEditor",void 0);var S=a.ccclass,A=a.property;t("MapEditor",(m=S("MapEditor"),y=A(l),C=A(u),M=A(l),_=A(g),d=A(f),k=A(c),m((z=n((w=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,e(n,"bg",z,o(n)),e(n,"block",E,o(n)),e(n,"mapBlock",D,o(n)),e(n,"mainManager",P,o(n)),e(n,"mapManager",B,o(n)),e(n,"blockCount",x,o(n)),n._tempCount=0,n._map=[],n}i(n,t);var r=n.prototype;return r.start=function(){for(var t=0;t<this.bg.children.length;t++){this.bg.children[t].on(s.EventType.TOUCH_END,this._touchEnd,this)}},r.onDisable=function(){this._tempCount=0,this.blockCount.string=this._tempCount.toString(),this._map=[],this.mapBlock.destroyAllChildren()},r._touchEnd=function(t){var n=t.target;this._map.push({x:n.position.x,y:n.position.y});var i=p(this.block);i.setPosition(n.getPosition()),i.setParent(this.mapBlock),this._tempCount++,this._tempCount%3!=0?this.blockCount.color=new h(255,0,0,255):this.blockCount.color=new h(61,255,0,255),this.blockCount.string=this._tempCount.toString()},r.exportMap=function(){if(this._map.length%3==0){var t=JSON.stringify(this._map);console.log(t)}else console.log("数量不是3的倍数")},n}(b)).prototype,"bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(w.prototype,"block",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(w.prototype,"mapBlock",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(w.prototype,"mainManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(w.prototype,"mapManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(w.prototype,"blockCount",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./block.ts","./MapData.ts","./PoolManager.ts","./GameOver.ts"],(function(e){"use strict";var t,i,o,n,r,l,a,c,s,u,h,p,g,f,_,m,y,d,B,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Prefab,c=e.Node,s=e.Label,u=e.tween,h=e.Vec3,p=e.Color,g=e.UIOpacity,f=e.RigidBody2D,_=e.Component},function(e){m=e.AudioManager},function(e){y=e.block},function(e){d=e.mapData},function(e){B=e.PoolManager},function(e){v=e.GameOver}],execute:function(){var b,k,x,M,w,P,S,I,C,T,z,O,A,D,R,U,N,F,G,L,V,q;r._RF.push({},"5f189qZIA9H9pPN6lFiy1fq","MapManager",void 0);var E=l.ccclass,H=l.property,j=B.instance();e("MapManager",(b=E("MapManager"),k=H(a),x=H(m),M=H(c),w=H(s),P=H(c),S=H(s),I=H(s),C=H(s),b((O=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"blockPr",O,n(t)),o(t,"audioManager",A,n(t)),o(t,"gameOver",D,n(t)),o(t,"itemTooltip",R,n(t)),o(t,"blcokInput",U,n(t)),o(t,"recallPro",N,n(t)),o(t,"recall",F,n(t)),o(t,"refresh",G,n(t)),o(t,"disappearSpeed",L,n(t)),o(t,"moveSpeed",V,n(t)),o(t,"sortSpeed",q,n(t)),t._recallproBlock=9,t._recallBlock=9,t._updateBlock=9,t._level=0,t._recycleBox=[],t._mainManager=null,t}i(t,e);var r=t.prototype;return r._initUIData=function(e){this._recallproBlock=e,this._recallBlock=e,this._updateBlock=e,this.recallPro.string=this._recallproBlock.toString(),this.recall.string=this._recallBlock.toString(),this.refresh.string=this._updateBlock.toString()},r.init=function(e,t){var i=this;this._mainManager=e,this.gameOver.active=!1,this._recycleBox=[],this.blcokInput.active=!0,this._initUIData(this._level+1);for(var o=d[this._level],n=[],r=0,l=o.length/3,a=0;a<l;a++)a%33==0&&(r=0),n.push(r,r,r),r++;n.sort((function(){return Math.random()>.5?-1:1}));for(var c=function(e,t){var r=n[t],l=o[t],a=j.getNode(i.blockPr,i.node),c=a.children[0];a.scale=new h(1,1,1),c.setPosition(new h(0,1800,0)),a.setPosition(new h(l.x,l.y)),a.getComponent(y).init(i,r),u(c).delay(.1*t).to(.3,{position:new h(0,0,0)},{easing:"bounceInOut"}).call((function(){i.audioManager.playBtnSound()})).delay(.5).call((function(){if(t===e-1){i.blcokInput.active=!1;var o="第"+(i._level+1)+"局";i._itemTooltip(o,new p(255,255,255,255))}})).start()},s=0,g=o.length;s<g;s++)c(g,s)},r.checkRecycleBox=function(e){var t=this,i=e.children[0].name;if(this._recycleBox.length<2)this._recycleBox.push({name:i,target:e,onceBlockPos:e.getPosition()});else{for(var o=!1,n=0;n<this._recycleBox.length;n++){var r=this._recycleBox[n],l=this._recycleBox[n+1];if(r.name===i&&(!l||l.name!==i)){this._recycleBox.splice(n+1,0,{name:i,target:e,onceBlockPos:e.getPosition()}),o=!0;break}}o||this._recycleBox.push({name:i,target:e,onceBlockPos:e.getPosition()})}this._startBlockAnim();for(var a=0,c=0;c<this._recycleBox.length;c++){var s=this._recycleBox[c].name;i===s&&a++}var p=[];if(3===a){for(var g=function(e){var o=t._recycleBox[e].target,n=t._recycleBox[e].name;i===n?u(o).delay(t.disappearSpeed).call((function(){o.getComponent(y).effect.resetSystem()})).to(.2,{scale:new h(0,0,1)}).delay(.4).call((function(){j.putNode(o)})).start():p.push({name:n,target:o,onceBlockPos:o.getPosition()})},f=0;f<this._recycleBox.length;f++)g(f);this._recycleBox=[],this._recycleBox=p,u(this.node).delay(this.sortSpeed).call((function(){t._startBlockAnim(),t.audioManager.playRemoveSound()})).delay(.8).call((function(){t._gameVictory()})).start()}else this._gameOver()},r._gameOver=function(){this._recycleBox.length>=7&&this.gameOver.getComponent(v).init(!1)},r._gameVictory=function(){if(0===this.node.children.length&&0===this._recycleBox.length){if(this._level<d.length-1)return this._level++,void this._mainManager.resetGame();this._level=0,this.gameOver.getComponent(v).init(!0)}},r._startBlockAnim=function(){for(var e=0;e<this._recycleBox.length;e++){var t=this._recycleBox[e].target,i=t.children[0],o=100*e-300+1;t.position.x===o&&-463===t.position.y||(u(t).to(this.moveSpeed,{position:new h(o,-463)}).start(),u(i).to(.1,{scale:new h(1,1,1)}).start())}},r._itemTooltip=function(e,t){void 0===t&&(t=new p(221,23,23,255));var i=this.itemTooltip.node;i.active||(i.active=!0,i.position=new h(0,375),this.itemTooltip.string=e,this.itemTooltip.color=t,i.getComponent(g).opacity=0,u(i).to(.2,{position:new h(0,555)}).start(),u(i.getComponent(g)).to(.2,{opacity:255}).delay(.8).to(.2,{opacity:0}).call((function(){i.active=!1})).start())},r.recallItemProBtn=function(e){var t=this;if(this.audioManager.playBtnSound(),this._recallproBlock<=0)this._itemTooltip("道具不足");else if(this._recycleBox.length<3)this._itemTooltip("没有可上移的");else{this._recallproBlock--,this.recallPro.string=this._recallproBlock.toString();for(var i=this._recycleBox.length-3,o=function(e){var i=t._recycleBox[e],o=i.target.getComponent(y),n=100*e-300+1;u(i.target).to(.2,{position:new h(n,-334)}).call((function(){o.blockOn()})).start()},n=this._recycleBox.length-1;n>=i;n--)o(n);this._recycleBox.splice(this._recycleBox.length-3,3)}},r.recallItemBtn=function(e){if(this.audioManager.playBtnSound(),this._recallBlock<=0)this._itemTooltip("道具不足");else if(0!==this._recycleBox.length){var t=this._recycleBox[this._recycleBox.length-1],i=t.target,o=t.onceBlockPos;if(o.y<-330)this._itemTooltip("没有可撤回的");else{this._recallBlock--,this.recall.string=this._recallBlock.toString();var n=i.getComponent(y);this._recycleBox.splice(this._recycleBox.length-1,1),u(i).to(.2,{position:o}).call((function(){n.blockOn(),n.isMoveAction=!1,i.getComponent(f).enabled=!0,i.getComponent(f).wakeUp()})).start()}}else this._itemTooltip("没有可撤回的")},r.refreshItemBtn=function(e){var t=this;if(this.audioManager.playBtnSound(),this._updateBlock<=0)this._itemTooltip("道具不足");else if(!(this.node.children.length<=0)){this._updateBlock--,this.refresh.string=this._updateBlock.toString();var i=[],o=[];this.node.children.forEach((function(e){e.getComponent(f).enabled&&(i.push(e),o.push(e.getPosition()))})),o.sort((function(){return Math.random()>.5?-1:1})),this.blcokInput.active=!0,i.forEach((function(e,n){var r=e,l=o[n],a=r.getComponent(f),c=r.children[0],s=Math.floor(360*Math.random()),p=Math.floor(100*Math.random()+100);a.enabled=!1,u(r).to(.2,{position:new h(0,100)}).to(.2,{angle:s}).by(1.5,{angle:900}).call((function(){r.angle=0})).to(.2,{position:l}).call((function(){a.enabled=!0,a.wakeUp()})).start(),u(c).to(1,{position:new h(p,0)}).delay(.8).to(.1,{position:new h(0,0)}).delay(.5).call((function(){n===i.length-1&&(t.blcokInput.active=!1)})).start()}))}},t}(_)).prototype,"blockPr",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(z.prototype,"audioManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"gameOver",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"itemTooltip",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"blcokInput",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"recallPro",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"recall",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(z.prototype,"refresh",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"disappearSpeed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=t(z.prototype,"moveSpeed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=t(z.prototype,"sortSpeed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=z))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(n){"use strict";var t,e,o,a;return{setters:[function(n){t=n.cclegacy,e=n._decorator,o=n.instantiate,a=n.NodePool}],execute:function(){var r,i;t._RF.push({},"1213cNwvcBAepNFMgZuGr+0","PoolManager",void 0);var c=e.ccclass;e.property,n("PoolManager",c("PoolManager")(((i=function(){function n(){this._nodePoolMap={}}n.instance=function(){return this._instance||(this._instance=new n),this._instance};var t=n.prototype;return t.getNode=function(n,t){var e=n.name,r=null,i=this._nodePoolMap[e];return i?r=i.size()>0?i.get():o(n):(this._nodePoolMap[e]=new a,r=o(n)),r.parent=t,r},t.putNode=function(n){var t=n.name;n.parent=null,this._nodePoolMap[t]||(this._nodePoolMap[t]=new a),this._nodePoolMap[t].put(n)},n}())._instance=null,r=i))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/tempBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,s,r,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Vec3,s=t.tween,r=t.bezier,c=t.Component}],execute:function(){var p;e._RF.push({},"b8bf4MX9lBOBKWLiJCtZIpN","tempBlock",void 0);var u=n.ccclass;n.property,t("tempBlock",u("tempBlock")(p=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this,o=this.node.getPosition(),e=new i(0,0),n=new i(0,158);s(this.node).to(1,{position:n},{onUpdate:function(s,c){var p=t.node.position.x,u=t.node.position.y,a=t.node.position.z,l=r(p,o.x,e.x,n.x,0),d=r(u,o.y,e.y,n.y,0),f=r(a,o.z,e.z,n.z,0);t.node.setPosition(new i(l,d,f))}}).start()},e}(c))||p);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
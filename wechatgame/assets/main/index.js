System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,i,r,o,a,u,c;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,u=n.AudioClip,c=n.Component}],execute:function(){var s,l,p,d,f,h;o._RF.push({},"14306+s1xNGYaDb7XXQWZhz","AudioManager",void 0);var g=a.ccclass,y=a.property;n("AudioManager",(s=g("AudioManager"),l=y(u),s(((h=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,i(t,"btnSound",f,r(t)),t}return e(t,n),t.instance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.playAudioSound=function(){console.log(this.btnSound)},t}(c))._instance=null,f=t((d=h).prototype,"btnSound",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,e,i,c,l,r,s,a,h,u,p,d,C,k,b,f,g,_;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){c=t.cclegacy,l=t._decorator,r=t.Sprite,s=t.SpriteFrame,a=t.AudioClip,h=t.BoxCollider2D,u=t.Contact2DType,p=t.Input,d=t.math,C=t.AudioSource,k=t.tween,b=t.Vec3,f=t.RigidBody2D,g=t.Color,_=t.Component}],execute:function(){var S,T,v,y,m,B,E,I,O;c._RF.push({},"074104P+eNHU6EoHJRQJBOM","block",void 0);var x=l.ccclass,A=l.property;t("block",(S=x("block"),T=A(r),v=A(s),y=A(a),S((E=n((B=function(t){function n(){for(var n,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return n=t.call.apply(t,[this].concat(c))||this,e(n,"blockSprite",E,i(n)),e(n,"blockSF",I,i(n)),e(n,"clip",O,i(n)),n.upBlockCound=0,n.isClickBlcok=!0,n.isMoveAction=!1,n._mapmanager=null,n._blockIndex=0,n}o(n,t);var c=n.prototype;return c.start=function(){var t=this.getComponent(h);t&&(t.on(u.BEGIN_CONTACT,this.onBeginContact,this),t.on(u.END_CONTACT,this.onEndContact,this))},c._blockOn=function(){this.node.on(p.EventType.TOUCH_START,this._touchStart,this),this.node.on(p.EventType.TOUCH_END,this._touchEnd,this),this.node.on(p.EventType.TOUCH_CANCEL,this._touchCancel,this)},c._blockOff=function(){this.node.off(p.EventType.TOUCH_START,this._touchStart,this),this.node.off(p.EventType.TOUCH_END,this._touchEnd,this),this.node.off(p.EventType.TOUCH_CANCEL,this._touchCancel,this)},c.init=function(t){this._blockOn();var n=d.randomRangeInt(0,9);this._mapmanager=t,this.blockSprite.spriteFrame=this.blockSF[n]},c._touchStart=function(t,n){this.isClickBlcok&&(this.node.getComponent(C).playOneShot(this.clip,1),this._blockIndex=this.node.getSiblingIndex(),this.node.setSiblingIndex(99),k(this.node.children[0]).to(.1,{scale:new b(1.4,1.4,1.4)}).start())},c._touchEnd=function(t,n){this.isClickBlcok&&(this.isMoveAction=!0,this.node.getComponent(f).enabled=!1,this._mapmanager.checkRecycleBox(this.node),this._blockOff())},c._touchCancel=function(t,n){this.isClickBlcok&&(k(this.node.children[0]).to(.1,{scale:new b(1,1,1)}).start(),this.node.setSiblingIndex(this._blockIndex))},c.onBeginContact=function(t,o,e){if(!this.isMoveAction){var i=o.node,c=t.node,l=i.getComponent(n);c.getSiblingIndex()>i.getSiblingIndex()&&(l.blockSprite.color=new g(95,95,95,255),l.upBlockCound++,l.isClickBlcok=!1)}},c.onEndContact=function(t,o,e){var i=o.node,c=t.node,l=i.getComponent(n);l.isMoveAction&&l.upBlockCound>0||c.getSiblingIndex()>i.getSiblingIndex()&&(l.upBlockCound--,l.upBlockCound<=0&&(l.blockSprite.color=new g(255,255,255,255),l.isClickBlcok=!0))},n}(_)).prototype,"blockSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(B.prototype,"blockSF",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),O=n(B.prototype,"clip",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=B))||m));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./MainManager.ts","./MapManager.ts","./block.ts","./MapData.ts","./MapBlock.ts","./MapEditor.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapManager.ts"],(function(a){"use strict";var e,t,r,i,n,o,c,s,p,l;return{setters:[function(a){e=a.applyDecoratedDescriptor,t=a.inheritsLoose,r=a.initializerDefineProperty,i=a.assertThisInitialized},function(a){n=a.cclegacy,o=a._decorator,c=a.Node,s=a.sys,p=a.Component},function(a){l=a.MapManager}],execute:function(){var u,M,g,m,d,f,h;n._RF.push({},"a5736UCmXRJgadz0gD/MjI3","MainManager",void 0);var v=o.ccclass,y=o.property;a("MainManager",(u=v("MainManager"),M=y(l),g=y(c),u((f=e((d=function(a){function e(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=a.call.apply(a,[this].concat(n))||this,r(e,"mapManager",f,i(e)),r(e,"mapEditor",h,i(e)),e}t(e,a);var n=e.prototype;return n.start=function(){this.mapEditor.active||this.mapManager.init()},n.resetGame=function(){this.mapManager.node.destroyAllChildren(),this.mapManager.init()},n.editorMap=function(){this.mapManager.node.active=!1,this.mapEditor.active=!0},n.resetMap=function(){this.mapEditor.active=!1,this.mapManager.node.active=!0,s.localStorage.removeItem("mapData"),this.resetGame()},e}(p)).prototype,"mapManager",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(d.prototype,"mapEditor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/MapBlock.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,c,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,c=t._decorator,e=t.Input,r=t.Component}],execute:function(){var s;o._RF.push({},"f6da6sa+DBO7KQ9mqzX6clJ","MapBlock",void 0);var i=c.ccclass;c.property,t("MapBlock",i("MapBlock")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var c=o.prototype;return c.start=function(){this.node.on(e.EventType.TOUCH_START,this._touchStart,this),this.node.on(e.EventType.TOUCH_START,this._touchEnd,this)},c._touchStart=function(){},c._touchEnd=function(){},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapData.ts",["cc"],(function(x){"use strict";var y;return{setters:[function(x){y=x.cclegacy}],execute:function(){y._RF.push({},"11e12puAZRKU5ExQr5mQwDl","MapData",void 0);x("mapData1",[{x:-226.678,y:466.738},{x:-150.678,y:371.738},{x:-74.678,y:276.738},{x:1.322,y:371.738},{x:-36.909,y:419.016},{x:-74.678,y:371.738},{x:-112.909,y:419.016},{x:-112.909,y:324.016},{x:-36.909,y:324.016},{x:39.091,y:324.016},{x:1.322,y:371.738},{x:39.091,y:419.016},{x:77.322,y:371.738},{x:77.322,y:276.738},{x:1.322,y:276.738},{x:39.091,y:324.016},{x:-36.909,y:324.016},{x:-36.909,y:229.016},{x:-112.909,y:229.016},{x:-150.678,y:276.738},{x:-188.909,y:324.016},{x:115.091,y:324.016},{x:115.091,y:419.016},{x:39.091,y:419.016},{x:77.322,y:371.738},{x:1.322,y:371.738},{x:-36.909,y:324.016}]);y._RF.pop()}}}));

System.register("chunks:///_virtual/MapEditor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainManager.ts","./MapManager.ts"],(function(t){"use strict";var e,n,i,a,r,o,l,c,s,p,u,g,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Node,c=t.Prefab,s=t.Input,p=t.instantiate,u=t.sys,g=t.Component},function(t){h=t.MainManager},function(t){f=t.MapManager}],execute:function(){var b,m,M,y,d,v,_,k,D,E,z,w,C;r._RF.push({},"c4367ChF+RDQJDCCogHAKKr","MapEditor",void 0);var P=o.ccclass,B=o.property;t("MapEditor",(b=P("MapEditor"),m=B(l),M=B(c),y=B(l),d=B(h),v=B(f),b((D=e((k=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"bg",D,a(e)),i(e,"block",E,a(e)),i(e,"mapBlock",z,a(e)),i(e,"mainManager",w,a(e)),i(e,"mapManager",C,a(e)),e._map=[],e}n(e,t);var r=e.prototype;return r.start=function(){for(var t=0;t<this.bg.children.length;t++){this.bg.children[t].on(s.EventType.TOUCH_END,this._touchEnd,this)}},r.onDisable=function(){this._map=[],this.mapBlock.destroyAllChildren()},r._touchEnd=function(t){var e=t.target;this._map.push({x:e.position.x,y:e.position.y});var n=p(this.block);n.setPosition(e.getPosition()),n.setParent(this.mapBlock)},r.exportMap=function(){var t=JSON.stringify(this._map);u.localStorage.setItem("mapData",t),this.node.active=!1,this.mapManager.node.active=!0,this.mainManager.resetGame()},e}(g)).prototype,"bg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(k.prototype,"block",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"mapBlock",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"mainManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(k.prototype,"mapManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=k))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./block.ts","./MapData.ts"],(function(e){"use strict";var t,r,i,a,n,o,c,l,s,p,h,g,u,y,m,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.Prefab,l=e.Node,s=e.sys,p=e.instantiate,h=e.Vec3,g=e.Sprite,u=e.tween,y=e.Label,m=e.Component},function(e){f=e.block},function(e){v=e.mapData1}],execute:function(){var _,d,B,b,x,S,M,O,k,w;n._RF.push({},"5f189qZIA9H9pPN6lFiy1fq","MapManager",void 0);var P=o.ccclass,C=o.property;e("MapManager",(_=P("MapManager"),d=C(c),B=C(l),_((S=t((x=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"blockPr",S,a(t)),i(t,"gameOver",M,a(t)),i(t,"disappearSpeed",O,a(t)),i(t,"moveSpeed",k,a(t)),i(t,"sortSpeed",w,a(t)),t._recycleBox=[],t}r(t,e);var n=t.prototype;return n.init=function(){this.gameOver.active=!1,this._recycleBox=[];var e=null,t=s.localStorage.getItem("mapData");e=t?JSON.parse(t):v;for(var r=0;r<e.length;r++){var i=e[r],a=p(this.blockPr);a.setPosition(new h(i.x,i.y)),a.setParent(this.node),a.getComponent(f).init(this)}},n.checkRecycleBox=function(e){var t=this,r=e.children[0].getComponent(g).spriteFrame.name;if(this._recycleBox.length<2)this._recycleBox.push({name:r,target:e});else{for(var i=!1,a=0;a<this._recycleBox.length;a++){var n=this._recycleBox[a],o=this._recycleBox[a+1];if(n.name===r&&(!o||o.name!==r)){this._recycleBox.splice(a+1,0,{name:r,target:e}),i=!0;break}}i||this._recycleBox.push({name:r,target:e})}this._startBlockAnim();for(var c=0,l=0;l<this._recycleBox.length;l++){var s=this._recycleBox[l].name;r===s&&c++}var p=[];if(3===c){for(var y=function(e){var i=t._recycleBox[e].target,a=t._recycleBox[e].name;r===a?u(i).delay(t.disappearSpeed).to(.15,{scale:new h(.2,.2,1)}).call((function(){i.destroy()})).start():p.push({name:a,target:i})},m=0;m<this._recycleBox.length;m++)y(m);this._recycleBox=[],this._recycleBox=p,u(this.node).delay(this.sortSpeed).call((function(){t._startBlockAnim()})).delay(.4).call((function(){t._gameVictory()})).start()}else this._gameOver()},n._gameOver=function(){7===this._recycleBox.length&&(console.log("game over!"),this.gameOver.active=!0,this.gameOver.getChildByName("Label").getComponent(y).string="GAME OVER")},n._gameVictory=function(){0===this.node.children.length&&0===this._recycleBox.length&&(console.log("game victory"),this.gameOver.active=!0,this.gameOver.getChildByName("Label").getComponent(y).string="GAME VICTORY")},n._startBlockAnim=function(){for(var e=0;e<this._recycleBox.length;e++){var t=this._recycleBox[e].target,r=t.children[0],i=74*e-225+2;t.position.x===i&&-845===t.position.y||(u(t).to(this.moveSpeed,{position:new h(i,-445)}).start(),u(r).to(.1,{scale:new h(1,1,1)}).start())}},t}(m)).prototype,"blockPr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(x.prototype,"gameOver",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(x.prototype,"disappearSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(x.prototype,"moveSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=t(x.prototype,"sortSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=x))||b));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});